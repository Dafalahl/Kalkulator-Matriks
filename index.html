<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Matriks</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="matrix-calculator">
        <h1>Kalkulator Matriks</h1>

        <div class="matrix-section">
            <div class="matrix-panels-container" id="matrix-panels-container">
                </div>
        </div>
        <div class="custom-expression">
            <input type="text" id="custom-expr-input" placeholder="cth., 2*A + B atau inv(A)">
            <button id="eval-expr-btn">=</button>
        </div>
        <div class="controls">
            <label>
                <input type="checkbox" id="display-decimals-check"> Tampilkan desimal
            </label>
            <label>
                Angka signifikan:
                <input type="number" id="sig-digits-input" value="4" min="1" max="15" disabled>
            </label>
            <button id="clean-output-btn">Bersihkan Output</button> 
            <button id="reset-all-btn" title="Atur Ulang Semua"><i class="fas fa-sync-alt"></i> Atur Ulang</button>
        </div>
        <div class="output-area">
            <h2>Hasil</h2>

            <div id="result-general-output">
                Pilih operasi untuk melihat hasil.
            </div>

            <div id="result-detailed-view" class="hidden">
                <div class="result-summary-display">
                    <div id="result-summary-input-matrix">
                        </div>
                    <div id="result-summary-operation-symbol">
                        </div>
                    <div id="result-summary-main-result">
                       </div>
                </div>
                <div class="result-main-actions">
                    <button id="clean-output-btn-detailed" title="Bersihkan tampilan hasil saat ini"><i class="fas fa-trash"></i></button>
                    <button id="copy-result-btn-detailed" title="Salin hasil dan detail"><i class="fas fa-copy"></i></button>
                    <button id="share-result-btn-detailed" title="Bagikan hasil"><i class="fas fa-share-alt"></i></button>
                </div>

                <div id="calculation-methods-container">
                    </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        // Render MathJax setiap kali detail perhitungan diubah
        const calcContainer = document.getElementById('calculation-methods-container');
        const observer = new MutationObserver(() => {
            if (window.MathJax) MathJax.typesetPromise();
        });
        if (calcContainer) observer.observe(calcContainer, { childList: true, subtree: true });
    </script>
</body>
</html>
